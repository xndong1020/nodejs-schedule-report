<section class="ui center aligned page" style="margin-left: 1vw; width: 88%;">
  <div class="row">
    <h1><i class="fas fa-users"></i> Tasks Management</h1>
  </div>
  <div class="ui hidden divider"></div>
  <% include ./partials/messages_semantic_ui %>
  <table class="ui stripped celled sortable table">
    <thead>
      <tr>
        <th class="one wide">Task Status</th>
        <th class="one wide">Description</th>
        <th class="one wide">Task Type</th>
        <th class="one wide">Primary Device</th>
        <th class="one wide">Secondary Device</th>
        <th class="one wide">Third Device</th>
        <th class="one wide">Fourth Device</th>
        <th class="two wide">Start Date</th>
        <th class="two wide">End Date</th>
        <th class="one wide">Run At</th>
        <th class="one wide">Report</th>
        <th class="two wide">Actions</th>
      </tr>
    </thead>
    <tbody>
      <% for(var i=0; i< tasks.length; i++) {%>
      <tr>
        <td class="one wide" id="task_status_<%= tasks[i]._id %>">
          <% if(tasks[i].status==='pending') { %>
          <div class="ui yellow ribbon label"><%= tasks[i].status %></div>
          <% } else if(tasks[i].status==='complete') { %>
          <div class="ui green ribbon label"><%= tasks[i].status %></div>
          <% } else if(tasks[i].status==='fail') { %>
          <div class="ui red ribbon label"><%= tasks[i].status %></div>
          <% } %>
        </td>
        <td class="one wide"><%= tasks[i].text %></td>
        <td class="one wide"><%= tasks[i].task_type %></td>
        <td class="one wide"><%= tasks[i].primary_device %></td>
        <td class="one wide"><%= tasks[i].secondary_device %></td>
        <td class="one wide"><%= tasks[i].third_device %></td>
        <td class="one wide"><%= tasks[i].fourth_device %></td>
        <td class="two wide"><%= tasks[i].start_date %></td>
        <td class="two wide"><%= tasks[i].end_date %></td>
        <td class="one wide"><%= tasks[i].run_at %></td>
        <td class="one wide">
          <% if(tasks[i].reportId) { %><a
            href="/reports/<%= tasks[i].task_type %>/<%= tasks[i].reportId %>"
            style="padding-left:15px;"
            >Link</a
          ><% } %>
        </td>
        <td class="two wide">
          <div class="ui two buttons">
            <a href="/tasks/edit/<%= tasks[i]._id %>">
              <button class="ui positive button">Edit</button>
            </a>
            <div class="or"></div>
            <a href="/tasks/delete/<%= tasks[i]._id %>">
              <form
                action="/tasks/delete/<%= tasks[i]._id %>"
                method="POST"
                class="delete_task"
                name="<%= tasks[i]._id %>"
              >
                <button class="ui negative button" type="submit">
                  Delete
                </button>
              </form>
            </a>
          </div>
        </td>
      </tr>
      <% } %>
    </tbody>
    <tfoot>
      <tr>
        <th></th>
        <th colspan="12">
          <a href="/tasks/create">
            <div class="ui right floated small primary labeled icon button">
              <i class="tasks icon"></i> Create New Task
            </div>
          </a>
        </th>
      </tr>
    </tfoot>
  </table>
</section>
<div class="ui basic modal">
  <div class="ui icon header">
    <i class="user icon"></i> Deleting A Scheduled Task
  </div>
  <div class="content"><p>Are you sure you want to delete this task?</p></div>
  <div class="actions">
    <div class="ui red basic cancel inverted button">
      <i class="remove icon"></i> No
    </div>
    <div class="ui green ok inverted button">
      <i class="checkmark icon"></i> Yes
    </div>
  </div>
</div>
